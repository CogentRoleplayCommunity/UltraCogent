<!DOCTYPE html>
<html lang="en">
  <head>

<!-- Beginning of head content -->

    <link rel="canonical" href="./CharacterSheet-V1.0.html" />
    <!-- Meta data (Title, keywords, and description should be changed for each page...) -->
    <title>Ultra Cogent - CharacterSheet-V1.0</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="Keywords" content="">
    <meta name="Description" content="">
    <link rel="icon" href="../Images/Common/Icon.png" type="image/x-icon">
    <!-- Google font(s) -->
    <link href="https://fonts.googleapis.com/css?family=Spectral+SC|Vollkorn" rel="stylesheet">
    <!-- Style -->
    <!-- Style sheets are managed by the construct.sh scipt, if you need to add another style sheet do it here for this page, of in the construct script for all pages or for Dark/Light pages separately-->
    <link rel="stylesheet" type="text/css" href="../CSS/PageStyleLight.css">
    <link rel="stylesheet" type="text/css" href="../CSS/ContentStyleLight.css">
<!-- Animation -->
<style>
.IOLabel{color: rgb(0,180,255);}
.OutputField{color: rgb(0, 150, 200);}
</style>

<!-- End of head content -->

  </head>
  <body>
    <div class="Shading">
      <div class="PageContent">
      <div class="TopOffset"></div>

<!-- Beginning of page content -->

    <!-- Remember! In order to insert an image or link to downloadable file, from Files or Images folder, the path must start with ../ in front instead of ./ since this file is in a subdirectory already. -->
    <!-- Leave the markers untouched! -->
<!--TitleMarker--><h1 style="text-align: center"> Ultra Cogent - V1.0 - Character Sheet - V1.0
</h1>

<h2 class="IOLabel"> UNFINISHED! Please come back later. </h2>

<div class="TranslucentPanel" style="position: static; max-width: 100%; height: fit-content; float: left;">

    <div class="PanelArea" style="position: static; max-width: 100%; height: fit-content; float: left;">
        <!--When adjustung the style of the div below also need to change it in ImgOrientation function-->
        <div id="BasicCharacterData" class="PanelArea" style="position: static; width: 52%; min-width: 30%; height: fit-content; float: left;">

            <div class="PanelArea" style="position: static; min-width: 450px; max-width: 520px; height: max-content; min-height: fit-content; margin-right: 10px; float: left;">
                <h2 class="IOLabel">
                Player: &nbsp; <input class="InputField" type="text" id="PName_I" style="display: inline;"><span class="OutputField" id="PName_O" style="display: none;"></span></h2>
                <h3 class="IOLabel">
                Campaign: &nbsp; <input class="InputField" type="text" id="Campaign_I" style="display: inline;"><span class="OutputField" id="Campaign_O" style="display: none;"></span>
                </h3>
                <h2 class="IOLabel">
                Character: &nbsp; <input class="InputField" type="text" id="CName_I" style="display: inline;"><span class="OutputField" id="CName_O" style="display: none;"></span></h2>
                <h3 class="IOLabel">
                Age: &nbsp; <input class="InputField" type="text" id="Age_I" style="display: inline;"><span class="OutputField" id="Age_O" style="display: none;"></span>
                <br>Race: &nbsp; <input class="InputField" type="text" id="Race_I" style="display: inline;"><span class="OutputField" id="Race_O" style="display: none;"></span>
                <br>Sex: &nbsp; <input class="InputField" type="text" id="Sex_I" style="display: inline;"><span class="OutputField" id="Sex_O" style="display: none;"></span>
                </h3>
            </div>

            <div class="PanelArea" style="position: static; min-width: 200px; max-width: 400px; height: max-content; min-height: fit-content; margin-right: 10px; float: left;">
                <h2 class="IOLabel">Attributes:</h2>
                <h3 class="IOLabel">
                    <br>Physical Integrity (Phy.Int.): &nbsp; <input class="InputField" type="text" id="PhyInt_I" style="display: inline;"><span class="OutputField" id="PhyInt_O" style="display: none;"></span>
                    <br>Strength (Str.): &nbsp; <input class="InputField" type="text" id="Str_I" style="display: inline;"><span class="OutputField" id="Str_O" style="display: none;"></span>
                    <br>Reflex (Ref.): &nbsp; <input class="InputField" type="text" id="Ref_I" style="display: inline;"><span class="OutputField" id="Ref_O" style="display: none;"></span>
                    <br>Intelligence (Int.): &nbsp; <input class="InputField" type="text" id="Int_I" style="display: inline;"><span class="OutputField" id="Int_O" style="display: none;"></span>
                    <br>Mental Integrity (Men.Int.): &nbsp; <input class="InputField" type="text" id="MenInt_I" style="display: inline;"><span class="OutputField" id="MenInt_O" style="display: none;"></span>
                </h3>
            </div>
        </div>

        <!--When adjustung the style of the div below also need to change it in ImgOrientation function-->
        <div id="ProfilePictureDiv" class="PanelArea" style="position: static; max-width: 30%; min-width: 300px; height: fit-content; max-height: 640px; margin-right: 10px; float: right;">
            <img alt="(no art to show)" id="CharacterProfilePicture" src="" onload="ImgOrientation (this.naturalWidth, this.naturalHeight)" style="position: static; max-height: 100%; max-width: 100%;">
        </div>

        <!--When adjustung the style of the div below also need to change it in ImgOrientation function-->
        <div id="BeliefsAndMorality" class="PanelArea" style="position: static; max-width: 52%; min-width: 600px; height: 100%; min-height: fit-content; float: left;">
            <h3 class="IOLabel" style="white-space: nowrap; overflow: hidden;">Image URL: &nbsp; <input class="InputField" type="text" id="IMGURL_I" style="width: 100%; display: inline;"><span class="OutputField" id="IMGURL_O" style="display: none;"></span></h3>
            <p>(The image will be scaled to fit 30% of window width or max 640 pixel hight, whichever maxes out first.)</p>
            <h2 class="IOLabel">Beliefs and Morality:</h2>
            <p class="IOLabel"><input class="InputField" type="text" id="BaM_I" style="display: inline;"><span class="OutputField" id="BaM_O" style="display: none;"></span></p>
            <h2 class="IOLabel">Disposition:</h2>
            <p class="IOLabel"><input class="InputField" type="text" id="Disposition_I" style="display: inline;"><span class="OutputField" id="Disposition_O" style="display: none;"></span></p>
        </div>
    </div>

    <div class="PanelArea" style="position: static; width: max-content; height: fit-content; float: left;"></div>
        <div style="position: static; width: 98%; min-width: 400px; float: left;">
            <h2 class="IOLabel">
            <a class="IOLabel" id="SaveDataLink" href="#" style="margin: 30px; float: left; display: inline;">Save</a>
            <a class="IOLabel" id="EditDataLink" href="#" style="margin: 30px; float: left; display: none;">Edit</a>
            <a class="IOLabel" id="ClearDataLink" href="#" style="margin: 30px; float: right; display: none;">Clear</a>
            </h2>
        </div>
    </div>

</div>


<!--Due to the static posisioning of above divs above the generated bottom offset isn't working.-->
<div class="PanelArea" style="position: static; width: max-content; height: 100px; float: left;"></div>


<script>

/* Reusable code */

    // Element visibility
    function HideClass (ClassName)
    {
        Elements = document.getElementsByClassName (ClassName);
        for (var i = 0; i < Elements.length; i++) 
            Elements[i].style.display = 'none';
    }

    function ShowClassInline (ClassName)
    {
        Elements = document.getElementsByClassName (ClassName);
        for (var i = 0; i < Elements.length; i++) 
            Elements[i].style.display = "inline";
    }


    // Cookies
    function SetCookie (Name, Value, ExpirationDate = undefined)
    {
        if (Name !== undefined && Name !== "" && Value !== undefined && Value !== "")
            if (ExpirationDate)
            {
                let Expiry = new Date();
                if (ExpirationDate > 0)
                {
                    Expiry.setTime (Expiry.getTime () + (ExpirationDate * 24 * 60 * 60 * 1000));
                    Expiry = "expires=" + Expiry.toUTCString ();
                }
                document.cookie = Name + "=" + Value + ";" + Expiry + ";path=/;SameSite=Strict";
            }
            else
                document.cookie = Name + "=" + Value + ";SameSite=Strict";
    }

    function GetCookieValue (Name)
    {
        let CookieReturnValue = undefined;
        let Cookies = document.cookie.split(";");
        for (let i = 0; i < Cookies.length; i++)
        {
            let Cookie = Cookies[i].trim();
            if (Cookie.indexOf(Name + "=") === 0)
            {
                CookieReturnValue = Cookie.substring (Name.length + 1, Cookie.length);
                break;
            }
        }
        return CookieReturnValue;
    }

    function RefreshCookie (Name, ExpirationDate)
    {
        let Value = GetCookieValue (Name);
        if (Value !== "") SetCookie (Name, Value, ExpirationDate);
    }

    function DeleteCookie (Name)
    {
        document.cookie = Name + "=; expires=Thu, 01 Jan 1970 00:00:00 UTC; path=/;SameSite=Strict";
    }



/* May be reusable */


    function ImgOrientation (NaturalWidth, NaturalHeight)
    {
        // The image element by default expects pirtrait, if the image is square or landscpe, this should change the settings automagically so that the page still flows well and looks good.
        if (NaturalWidth >= NaturalHeight)
        {
            // As a general rule keep ProfilePictureDiv between 30 and 40% and BeliefsAndMorality above 50%
            document.getElementById ("BasicCharacterData").style.cssText = "position: static; max-width: 52%; min-width: 0%; height: fit-content; float: left;";
            // FIX THIS! The 2 inner divs also need to be shrinked shrinked but I'm too tired now...

            document.getElementById ("ProfilePictureDiv").style.cssText = "position: static; max-width: 36%; min-width: 480px; height: fit-content; max-height: 480px; margin-right: 10px; float: right;";
            document.getElementById ("BeliefsAndMorality").style.cssText = "position: static; width: 52%; min-width: 720px; height: 100%; min-height: fit-content; margin-right: 10px; float: left;";
        }
        // FIX THIS Probably better the image is hidden when inactive and hopefully automatically replaced by beliefs and morality section
        // FIX THIS Probably better the portrait mode is also adjusted here in the else block, but it may not work if no image give, or may need default settings...
    }





/* Document specific */

    let Character = {};
    let ListOfKeys = ["PName","Campaign","CName","Age","Race","Sex","IMGURL","PhyInt","Str","Ref","Int","MenInt","BaM","Disposition"];


    function EditMode ()
    {
        HideClass ("OutputField");
        document.getElementById ("EditDataLink").style.display = "none";
        ShowClassInline ("InputField");
        document.getElementById ("SaveDataLink").style.display = "inline";
        document.getElementById ("ClearDataLink").style.display = "inline";
    }

    function DisplayMode ()
    {
        ShowClassInline ("OutputField");
        document.getElementById ("EditDataLink").style.display = "inline";
        HideClass ("InputField");
        document.getElementById ("SaveDataLink").style.display = "none";
        document.getElementById ("ClearDataLink").style.display = "none";
    }

    function FillOutput ()
    {
        Object.keys(Character).forEach (key => {if (Character[key] !== undefined) {document.getElementById (key + "_O").textContent = Character[key];}});
        if (Character.IMGURL !== "" && Character.IMGURL !== undefined)
            document.getElementById("CharacterProfilePicture").src = Character.IMGURL;
    }

    function FillInput ()
    {
        if (Object.keys(Character).length !== 0)
            Object.keys(Character).forEach (key => {if (Character[key] !== undefined) {document.getElementById (key + "_I").value = Character[key];}});
        if (Character.IMGURL !== "" && Character.IMGURL !== undefined)
            document.getElementById("CharacterProfilePicture").src = Character.IMGURL;
    }


    function SaveCharacterData ()
    {
        // Clear object and collect data
        ListOfKeys.forEach (key => {delete Character[key];});
        ListOfKeys.forEach (key => {if (document.getElementById (key + "_I").value !== "") {Character[key] = document.getElementById (key + "_I").value;}});

        // Save to cookie
        if (Object.keys(Character).length !== 0)
            SetCookie ("CharacterCookie", JSON.stringify (Character), 365);
        else
            DeleteCookie ("CharacterCookie");

        // Switch to Display mode
        DisplayMode ();
        FillOutput ();
    }
    // Save on click
    document.getElementById("SaveDataLink").addEventListener("click", function(event) {event.preventDefault (); SaveCharacterData ();});


    function EditCharacterData ()
    {
        EditMode ();
        FillInput ();
    }
    // Edit on click
    document.getElementById("EditDataLink").addEventListener("click", function(event) {event.preventDefault (); EditCharacterData ();});


    function ClearCharacterData ()
    {
        // Clear Character
        ListOfKeys.forEach(key => {Character[key] = "";});
        FillInput ();
        FillOutput ();
        ListOfKeys.forEach(key => {delete Character[key];});
    }
    // Clear on click
    document.getElementById("ClearDataLink").addEventListener("click", function(event) {event.preventDefault (); ClearCharacterData ();});


    // Load from cookie
    function LoadCookies ()
    {
        // Character data
        let CharacterDataJson = GetCookieValue ("CharacterCookie");

        // Parse Character if exists.
        if (CharacterDataJson !== "" && CharacterDataJson !== undefined)
        {
            Character = JSON.parse(CharacterDataJson);
            DisplayMode ();
            FillOutput ();
        }
        else
            EditMode ();

        // Refresh cookie for 30 more days
        RefreshCookie ("CharacterCookie", 365);
    }
    // Load cookies when opening the page.
    window.onload = function() {LoadCookies ();};

</script>

<!-- End of page content -->

        <div class="BottomOffset"></div>
      </div>

<!-- Beginning of page title -->

      <div class="TitleArea">
        <span style="position: absolute; top: 0px; left: 0px;"><img src="../Images/Common/M.svg"></span>
        <span style="position: absolute; top: 0px; right: 0px;"><a href="./CharacterSheet-V1.0.html"><img src="../Images/Light/Moon.svg"></a></span>
        <div class="PageTitle">
          <b><span style="color: rgb(0,180,255)">U</span>ltra <span style="color: rgb(0,180,255)">C</span>ogent</b>
        </div>
        <div class="PageSubtitle">
          <span class="Slogan"><span style="color: rgb(0,180,255)">U</span>ltra <span style="color: rgb(0,180,255)">R</span>ealistic <span style="color: rgb(0,180,255)">U</span>niversal <span style="color: rgb(0,180,255)">R</span>oleplay <span style="color: rgb(0,180,255)">S</span>ystem
          </span>
        </div>
        <div class="FadeUp"></div>
      </div>

<!-- End of page title -->

      <div class="FadeDown"></div>

<!-- Beginning of Menu -->

      <div class="Menu">
        <div class="TopOffset"></div>
        <a href="../L-index.html"><div class="MenuPoint">Start Page</div></a>
        <a href="../L-Resources.html"><div class="MenuPoint">Resources</div></a>
        <a href="../L-ZZZ-Dev-DevHelp.html"><div class="MenuPoint">Dev Section</div></a>
        <div class="BottomOffset"></div>
      </div>

<!-- End of Menu -->

    </div>
  </body>
</html>
